---
title: 第五题:Tuple to Object
date: 2020/05/29
hideComments: false
---

## 挑战

这个简单的提问希望让你可以快速上手 Type Challenges。在这里，我们使用了一些神奇的技巧让 TypeScript 通过自身的类型系统来实现自动判题。

在这个挑战中，你需要修改下方的代码使得测试通过（使其没有类型错误）。

```ts
//传入一个元组类型，将这个元组类型转换为对象类型，这个对象类型的键/值都是从元组中遍历出来
type TupleToObject<T extends readonly any[]> = any;
// 你需要使得如下这行不会抛出异常
const tuple = ['tesla', 'model 3', 'model X', 'model Y'] as const
const tupleNumber = [1, 2, 3, 4] as const
const tupleMix = [1, '2', 3, '4'] as const

type cases = [
  Expect<Equal<TupleToObject<typeof tuple>, { tesla: 'tesla'; 'model 3': 'model 3'; 'model X': 'model X'; 'model Y': 'model Y' }>>,
  Expect<Equal<TupleToObject<typeof tupleNumber>, { 1: 1; 2: 2; 3: 3; 4: 4 }>>,
  Expect<Equal<TupleToObject<typeof tupleMix>, { 1: 1; '2': '2'; 3: 3; '4': '4' }>>,
]
type error = TupleToObject<[[1, 2], {}]>
```

## 解答

::: info 提示
请您在通过修改第 3 行，让 13-16 行代码不会抛出异常，并且记得将答案提交奥。
:::

<CodeBox surl="https://stackblitz.com/edit/typescript-f6tq2q?file=1.4.Readonly.ts,1.5.Tuple-to-Object.ts&hideExplorer=1&hideNavigation=1&view=editor" />

<!--info-footer-start--><br> <a href="https://github.com/paiDaXing-web/You-Don-t-Know-TS/issues/new?assignees=paiDaXing-web&labels=answer&template=1-5-%E5%AE%9E%E7%8E%B0Tuple%20to%20Object.md&title=1.5.%E5%AE%9E%E7%8E%B0Tuple%20to%20Object" target="_blank"><img src="https://6d78-mxm1923893223-ulteh-1302287111.tcb.qcloud.la/-%E5%88%86%E4%BA%AB%E4%BD%A0%E7%9A%84%E8%A7%A3%E7%AD%94-teal.svg?sign=8bb2a2a3bd2b1cc8f86bfd919d53197e&t=1668143704" alt="分享你的解答"/></a>  <!--info-footer-end-->

## 解析

传入一个元组类型，将这个元组类型转换为对象类型，这个对象类型的键/值都是从元组中遍历出来
返回一个对象，然后遍历数组，注意几个知识点：
1、例子中的as const是什么意思？【const 断言，作用是使其所有东西变成只读】
2、ts怎么遍历数组？【in T[number]】
3、typeof的使用 ？【将js中的let const var变量转换为ts中的type interface】
4、例子中最后一个为什么没有typeof关键字？（type error = TupleToObject<[[1, 2], {}]>）【这里的[1, 2], {}指的是类型t(写死的类型)，而不是js里的值】

::: details 答案

```typescript
type TupleToObject<T extends readonly string[]> = {[K in T[number]]:K}
```

:::

## 参考

- [二 typescript-基础类型](../theme-reco/base-2.md)
- [Typed JavaScript at Any Scale](https://www.typescriptlang.org/)
- [The TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/intro.html)
- [TypeScript for Java/C# Programmers](https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-oop.html)
- [TypeScript for Functional Programmers](https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-func.html)
